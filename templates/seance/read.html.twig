{% extends 'base.html.twig' %}

 {% block contentsq %}
 <div id="resultContainer">
 <div class="container">
    <div class="row justify-content-between align-items-center">
        <div class="col-auto">
            <a href="{{ path('app_seance_add') }}" class="btn btn-primary">Ajouter Seance</a>

               <a href="{{ path('PDF_Seance') }}" class="btn btn-primary">exporter pdf</a>
                <a href="{{ path('calendrier') }}" class="btn btn-primary">Calendar</a>
                  <a href="{{ path('stati') }}" class="btn btn-primary">statistique</a>
        </div>
        <div class="col-auto">
         <form class="form-inline" method="GET">
    <div class="input-group">
    
 <form id="searchForm" action="{{ path('app_seance_i') }}" method="get" class="row">
    <div class="col-md-6">
        <div class="d-flex justify-content-start">
            <div class="input-group">

               <input class="form-control" id="searchInput" type="text" name="search" placeholder="Search for..." aria-label="Search for..." aria-describedby="btnNavbarSearch" />
                <div class="input-group-append" style="margin-left: 5px;">
                    <button class="btn btn-primary" type="submit" id="btnNavbarSearch"><i class="fas fa-search"></i> Search</button>
                </div>
            </div>
        </div>
    </div>
    <div class="col-md-6">
        <div class="d-flex justify-content-end">
            <div class="input-group" style="margin-left: 10px;">
                <select id="sortSelect" class="form-control" name="sortField">
                    <option value="">Trier par ...</option>
                    <option value="typeSeance_asc">Type Séance (Ascendant)</option>
                    <option value="typeSeance_desc">Type Séance (Descendant)</option>
                </select>
                <div class="input-group-append">
                    <button class="btn btn-primary" type="submit" id="btnNavbartrie"><i class="fas fa-trie"></i> trie</button>
                </div>
            </div>
        </div>
    </div>
             
</form>

      
        <div class="input-group-append">
          =
        </div>
    </div>
</form>
        </div>
    </div>
     
</div>

    <table  id="tableBodyPlaceholder" class="table" >
        <thead>
            <tr>
                <th>Id_Seance</th>
                <th>Type_Seance</th>
                <th>Disponibilite</th>
                <th>Nb_Maximal</th>
                <th>Date_fin</th>
                <th>Categorie</th>
                <th>actions</th>
            </tr>
        </thead>
       
           {% for seance in seances %}
    <tr id="seance{{ seance.id }}">
        <td>{{ seance.id }}</td>
        <td>{{ seance.typeSeance }}</td>
        <td>{{ seance.DureeSeance }}</td>
        <td>{{ seance.nbMaximal }}</td>
        <td>{{ seance.dateFin|date('Y-m-d') }}</td>
        <td><img src="{{ asset('Photos/'~ seance.categorie) }}" width="250" height="150"></td>
        <td>
            <a href="{{ path('app_seance_edit', {'id': seance.idSeance }) }}" class="btn btn-success">
                <i class="fas fa-edit"></i> Edit
            </a>
            <a href="{{ path('app_seance_delete', { 'id': seance.id }) }}" class="btn btn-danger" style="display: inline-block;">
                <i class="fas fa-trash-alt"></i> Delete
            </a>
             <a href="{{ path('contrat_generate_pdf', {'id': seance.id}) }}" class="btn btn-primary">
    <i class="fa fa-file-pdf"></i>  PDF
</a>
        </td>
    </tr>
{% else %}
    <tr>
        <td colspan="7">no records found</td>
    </tr>
{% endfor %}

    </table>
</div>
   <script src="{{ asset('https://code.jquery.com/jquery-3.5.1.min.js') }}"></script>
  <script>
 
  
var delayTimer;

$(document).ready(function() {
    $('#searchInput').on('keyup', function() {
        clearTimeout(delayTimer);
        delayTimer = setTimeout(function() {
            var query = $('#searchInput').val();
            console.log(query);
            $.ajax({
                url: '{{ path('backrechercheAjax') }}',
                type: 'GET',
                data: { q: query },
                success: function(response) {
                    console.log(response);
                    $('#tableBodyPlaceholder').html($(response).find('#tableBodyPlaceholder').html());
                }
            }); 
        }, ); // Delay of 300 milliseconds
    });
});


</script>
  <script>
    </script>
<style>
    .search-input {
        background-image: url('path_to_your_blue_search_icon.png');
        background-size: 20px 20px; /* Adjust the size as needed */
        background-position: 10px center; /* Adjust the position as needed */
        background-repeat: no-repeat;
        padding-left: 40px; /* Space for the icon */
    }
</style>
  
 
 {% endblock %}
 {% block formSeance %}
 {% endblock %}
  {% block bodyse %}
 {% endblock %}