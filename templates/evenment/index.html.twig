{% extends 'base.html.twig' %}

{% block title %}Hello EvenmentController!{% endblock %}

{% block body %}
<style>
    .example-wrapper { margin: 1em auto; max-width: 800px; width: 95%; font: 18px/1.5 sans-serif; }
    .example-wrapper code { background: #F5F5F5; padding: 2px 6px; }
    table {
        border-collapse: collapse; /* Collapse table borders */
        width: 100%; /* Ensure table fills container */
        background-color: #fff; /* White background color for the table */
        border: 1px solid #ddd; /* Add border to the table */
        border-radius: 5px; /* Add border radius */
    }
    th, td {
        padding: 12px; /* Add padding to table cells */
        text-align: left; /* Align text to the left */
    }
    th {
        background-color: #f2f2f2; /* Add background color to table header cells */
        border-bottom: 2px solid #ddd; /* Add bottom border to table header cells */
    }
    tr:nth-child(even) {
        background-color: #f9f9f9; /* Alternate row background color */
    }
    tr:hover {
        background-color: #f5f5f5; /* Hover background color for rows */
    }
    table img { 
        max-width: 100px; /* Set max width for images within the table */
        height: 150px; /* Set fixed height for images */
        object-fit: cover; /* Maintain aspect ratio and cover entire space */
        display: block; /* Ensure images are centered within their cells */
        margin: auto; /* Center images horizontally */
    }
    
    .btn-danger {
        background-color: #dc3545;
        border-color: #dc3545;
        color: #fff;
    }

    /* Style for search and sort container */
    .search-sort-container {
        display: flex;
        justify-content: space-between;
        margin-bottom: 20px;
    }

    /* Style for search form */
    .search-form {
        flex: 1;
        margin-right: 10px;
    }

    /* Style for sort dropdown */
    .sort-dropdown {
        flex: 1;
    }

    /* Style for clickable rows */
    table tbody tr {
        cursor: pointer;
    }

</style>

<div class="example-wrapper">
    <div class="search-sort-container">
        <div class="search-form">
            <form action="{{ path('search_route') }}" method="GET">
                <input type="text" name="search" placeholder="Search...">
                <button type="submit" class="btn btn-primary">Search</button>                         
            </form>
        </div>

        <div class="sort-dropdown">
            <select id="sortSelect" class="btn btn-primary">
                <option value="{{ path('tri_asc') }}" {% if app.request.attributes.get('_route') == 'tri_asc' %}selected{% endif %}>TRI CROISSANTE</option>
                <option value="{{ path('tri_desc') }}" {% if app.request.attributes.get('_route') == 'tri_desc' %}selected{% endif %}>TRI DECROISSANTE</option>
            </select>
        </div>
    </div>

    <table border="1">
        <thead>
            <th>NOM EVENT</th>
            <th>DATE EVENT</th>
            <th>LIEU EVENT</th>
            <th>NOM STAR</th>
            <th>IMAGE</th>
            <th>Supprimer</th>
            <th>Modifier</th> <!-- Add a separate column for Modifier -->
        </thead>
        
        <tbody>
            {% for evenment in e %}
                <tr>
                    <td>{{ evenment.nomEvent }}</td>
                    <td>{{ evenment.dateEvent|date('Y-m-d H:i:s') }}</td>
                    <td>{{ evenment.lieuEvent }}</td>
                    <td>{{ evenment.nomStar }}</td>
                    <td>
                        {% if evenment.image %}
                            {% set imagePath = '/uploads/images/' ~ evenment.image %}
                            <img src="{{ asset(imagePath) }}" alt="Event Image">
                        {% else %}
                            No Image Available
                        {% endif %}
                    </td>
                    <td>
                        <a href="{{ path('supp_evenment', {'idEvent': evenment.idEvent}) }}" class="btn btn-danger">Supprimer</a>
                    </td>
                    <td>
                        <a href="{{ path('modifEvenment', {'idEvent': evenment.idEvent}) }}" class="btn btn-primary">Modifier</a>
                    </td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<script>
    document.getElementById('sortSelect').addEventListener('change', function() {
        var selectedOption = this.options[this.selectedIndex];
        window.location.href = selectedOption.value;
    });
</script>

{% endblock %}
